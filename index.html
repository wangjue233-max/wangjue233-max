<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="UTF-8">
  <title>个人博客</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: url("https://pic1.imgdb.cn/item/67b488c8d0e0a243d4008f93.png") no-repeat center center;
      background-size: cover;
      text-align: center;
      font-family: sans-serif;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
    }
    .navbar {
      width: 100%;
      background-color: rgba(0, 0, 0, 0.6);
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 1rem 0;
      position: fixed;
      top: 0;
      left: 0;
      z-index: 999;
    }
    .navbar button {
      background: none;
      border: 1px solid #fff;
      color: #fff;
      margin: 0 1rem;
      padding: 0.5rem 1rem;
      cursor: pointer;
      font-size: 1rem;
    }
    .navbar button:hover {
      background-color: rgba(255, 255, 255, 0.2);
    }
    .page-container {
      margin-top: 5rem;
      width: 80%;
      max-width: 800px;
      display: flex;
      flex-direction: column;
      align-items: center;
      flex-grow: 1;
      justify-content: center;
    }
    .page {
      display: none;
      width: 100%;
      background-color: rgba(255, 255, 255, 0.9);
      padding: 20px;
      border-radius: 10px;
      box-sizing: border-box;
    }
    .active {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
    }
    h1, h2, h3 {
      margin: 1rem 0;
      color: #333;
    }
    p {
      margin: 0.5rem 0;
      line-height: 1.6;
      text-align: left;
      color: #222;
    }
    .blog-list {
      width: 100%;
      text-align: left;
      margin: 1rem 0;
    }
    .blog-item {
      background-color: rgba(0, 0, 0, 0.05);
      margin: 1rem 0;
      padding: 1rem;
      border: 1px solid #ccc;
    }
    button, input {
      font-size: 1rem;
      margin: 0.5rem;
    }
    .footer {
      width: 100%;
      text-align: center;
      opacity: 0.8;
      padding: 0.5rem 0;
      color: #333;
    }
    .ip-info {
      margin: 1rem 0;
      background-color: rgba(0,0,0,0.05);
      padding: 1rem;
      border: 1px solid #ccc;
      width: 100%;
      color: #222;
    }
    .board {
      display: grid;
      grid-template-columns: repeat(15, 40px);
      grid-template-rows: repeat(15, 40px);
      gap: 1px;
      margin: 20px auto;
      background-color: #ccc;
      width: 601px;
      border: 2px solid #000;
    }
    .cell {
      width: 40px;
      height: 40px;
      background-color: #e0c193;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 30px;
      cursor: pointer;
    }
    .cell:hover {
      background-color: #d3a86e;
    }
    .black {
      width: 30px;
      height: 30px;
      background-color: black;
      border-radius: 50%;
    }
    .white {
      width: 30px;
      height: 30px;
      background-color: white;
      border-radius: 50%;
      border: 1px solid black;
    }
    .info {
      font-size: 20px;
      margin-top: 10px;
    }
    #rpgText {
      background-color: #0a0a23;
      color: #ffffff;
      padding: 10px;
      margin-bottom: 1rem;
      border-radius: 5px;
    }
    #game {
      max-width: 500px;
      background-color: #ffffff;
      color: #ffffff;
      margin: 0 auto;
      padding: 10px;
      border: 2px solid #0a0a23;
      border-radius: 10px;
    }
    #stats,
    #controls {
      border: 1px solid #0a0a23;
      padding: 5px;
      color: #0a0a23;
      margin-bottom: 10px;
      border-radius: 5px;
    }
    #monsterStats {
      display: none;
      border: 1px solid #0a0a23;
      padding: 5px;
      color: #ffffff;
      background-color: #c70d0d;
      border-radius: 5px;
      margin-bottom: 10px;
    }
    .stat {
      padding-right: 10px;
    }
    #game button {
      cursor: pointer;
      color: #0a0a23;
      background-color: #feac32;
      background-image: linear-gradient(#fecc4c, #ffac33);
      border: 3px solid #feac32;
      margin-right: 6px;
    }
  </style>
</head>
<body>
  <div class="navbar">
    <button onclick="showPage('home')">首页</button>
    <button onclick="showPage('about')">关于我</button>
    <button onclick="showPage('blog')">博客列表</button>
    <button onclick="showPage('gomoku')">五子棋</button>
    <button onclick="showPage('math')">加减法运算</button>
    <button onclick="showPage('baidu')">百度搜索</button>
    <button onclick="showPage('rpg')">RPG游戏</button>
    <button onclick="showPage('Ai')">AI</button>
  </div>
  <div class="page-container">
    <div id="home" class="page active">
      <h1>欢迎来到 Wangjue233 的个人博客</h1>
      <p>在这里，你可以看到我的个人动态、文章分享以及更多内容。</p>
      <div id="ipInfo" class="ip-info">
        <p>正在获取您的位置信息...</p>
      </div>
    </div>
    <div id="about" class="page">
      <h2>关于我</h2>
      <p>一个喜欢C++，scratch，围棋的人。坐标北京海淀</p>
    </div>
    <div id="blog" class="page">
      <h2>博客列表</h2>
      <div class="blog-list">
        <div class="blog-item">
          <h3>csp游记</h3>
          <p>csp游记</p>
          <button onclick="showPostDetail()">阅读全文</button>
        </div>
      </div>
    </div>
    <div id="postDetail" class="page">
      <h2>csp游记</h2>
      <p><strong>2024.08</strong><br>一直在搞初赛，做了n套模拟卷</p>
      <p><strong>2024.09.21</strong><br>csp j/s的考点都在北大附中...</p>
      <p><strong>2024.10.20 - 10.26</strong><br>刷了 n套模拟题...</p>
      <p><strong>2024.10.27</strong><br>周五在学校机房熟悉了 NOI Linux 系统...</p>
      <p><strong>2024.10.28</strong><br>复赛在人大附中...</p>
      <button onclick="showPage('blog')">返回博客列表</button>
    </div>
    <div id="gomoku" class="page">
      <h2>双人五子棋（非联机）</h2>
      <div class="info">当前回合：<span id="currentPlayer">黑棋</span></div>
      <div class="board" id="board"></div>
      <button onclick="resetGame()">重新开始</button>
    </div>
    <div id="math" class="page">
      <h2>随机口算题</h2>
      <div id="question"></div>
      <input type="number" id="uans" placeholder="请输入答案">
      <button onclick="checkAnswer()">提交答案</button>
      <p id="result"></p>
      <button onclick="showPage('home')">返回首页</button>
    </div>
    <div id="baidu" class="page">
      <h2>百度搜索</h2>
      <input type="text" id="keyword" placeholder="输入搜索内容">
      <button onclick="ds()">搜索</button>
      <button onclick="showPage('home')">返回首页</button>
    </div>
    <div id="rpg" class="page">
      <h2>RPG - Dragon Repeller By Hyn</h2>
      <div id="game">
        <div id="stats">
          <span class="stat">XP: <strong><span id="xpText">0</span></strong></span>
          <span class="stat">Health: <strong><span id="healthText">100</span></strong></span>
          <span class="stat">Gold: <strong><span id="goldText">50</span></strong></span>
        </div>
        <div id="controls">
          <button id="button1">Go to store</button>
          <button id="button2">Go to cave</button>
          <button id="button3">Fight dragon</button>
        </div>
        <div id="monsterStats">
          <span class="stat">Monster Name: <strong><span id="monsterName"></span></strong></span>
          <span class="stat">Health: <strong><span id="monsterHealth"></span></strong></span>
        </div>
        <div id="rpgText">
          欢迎来到 Dragon Repeller，你必须打败阻止人们离开镇子的巨龙。你当前在小镇广场。
        </div>
      </div>
    </div>
    <div id="Ai" class="page">
      <h2>AI</h2>
      <div id="AiLog" style="width: 100%; min-height: 150px; max-height: 300px; overflow-y: auto; background-color: rgba(255,255,255,0.7); margin-bottom:1rem; padding: 10px; border-radius: 5px; box-sizing: border-box;">
      </div>
      <input type="text" id="AiInput" placeholder="在此输入问题..." style="width:70%; height:2rem; font-size:1rem;">
      <button onclick="askFakeAi()" style="height:2.4rem;">发送</button>
    </div>
  </div>
  <div class="footer">Made by wangjue233</div>
  <script>
    function showPage(pageId){
      const pages = document.querySelectorAll(".page");
      pages.forEach(page => page.classList.remove("active"));
      document.getElementById(pageId).classList.add("active");
      window.scrollTo(0, 0);
    }
    function showPostDetail(){
      showPage('postDetail');
    }
    let number1, number2, op, ans;
    function checkAnswer(){
      const uans = parseInt(document.getElementById("uans").value, 10);
      const resultText = (uans === ans) ? "恭喜你答对了！" : "回答错误，正确答案是：" + ans + "。";
      document.getElementById("result").innerText = resultText;
    }
    function showPageWithMath(){
      showPage('math');
      number1 = Math.floor(Math.random() * 1000);
      number2 = Math.floor(Math.random() * 1000);
      op = Math.random() < 0.5 ? '+' : '-';
      ans = (op === '+') ? (number1 + number2) : (number1 - number2);
      document.getElementById("question").innerText = number1 + " " + op + " " + number2 + " = ?";
      document.getElementById("result").innerText = "";
      document.getElementById("uans").value = "";
    }
    document.querySelector('button[onclick="showPage(\'math\')"]').onclick = showPageWithMath;
    function ds(){
      const kw = document.getElementById("keyword").value.trim();
      if (kw){
        window.location.href = "https://www.baidu.com/s?wd=" + encodeURIComponent(kw);
      } else {
        alert("请输入搜索内容！");
      }
    }
    const boardSize = 15;
    let board = Array.from({ length: boardSize }, () => Array(boardSize).fill(0));
    let currentPlayer = 1;
    let gameOver = false;
    function createBoard(){
      const boardElement = document.getElementById("board");
      if(!boardElement) return;
      boardElement.innerHTML = "";
      for (let i = 0; i < boardSize; i++){
        for (let j = 0; j < boardSize; j++){
          const cell = document.createElement("div");
          cell.classList.add("cell");
          cell.dataset.row = i;
          cell.dataset.col = j;
          cell.addEventListener("click", handleMove);
          boardElement.appendChild(cell);
        }
      }
    }
    function handleMove(e){
      if (gameOver) return;
      const row = e.target.dataset.row, col = e.target.dataset.col;
      if (board[row][col] !== 0) return;
      board[row][col] = currentPlayer;
      e.target.innerHTML = `<div class=\"${currentPlayer === 1 ? 'black' : 'white'}\"></div>`;
      if (checkWin(parseInt(row), parseInt(col))){
        document.querySelector(".info").innerHTML = "🎉 <b>" + (currentPlayer === 1 ? "黑棋" : "白棋") + " 获胜！</b>";
        gameOver = true;
        return;
      }
      currentPlayer = 3 - currentPlayer;
      document.getElementById("currentPlayer").textContent = currentPlayer === 1 ? "黑棋" : "白棋";
    }
    function checkWin(row, col){
      const directions = [[1, 0],[0, 1],[1, 1],[1, -1]];
      for (const [dx, dy] of directions){
        let count = 1;
        for (let step = 1; step < 5; step++){
          const nr = row + dx * step, nc = col + dy * step;
          if (nr < 0 || nr >= boardSize || nc < 0 || nc >= boardSize || board[nr][nc] !== currentPlayer) break;
          count++;
        }
        for (let step = 1; step < 5; step++){
          const nr = row - dx * step, nc = col - dy * step;
          if (nr < 0 || nr >= boardSize || nc < 0 || nc >= boardSize || board[nr][nc] !== currentPlayer) break;
          count++;
        }
        if (count >= 5) return true;
      }
      return false;
    }
    function resetGame(){
      board = Array.from({ length: boardSize }, () => Array(boardSize).fill(0));
      currentPlayer = 1;
      gameOver = false;
      document.getElementById("currentPlayer").textContent = "黑棋";
      const infoEl = document.querySelector(".info");
      if(infoEl) infoEl.innerHTML = "当前回合：<span id=\"currentPlayer\">黑棋</span>";
      createBoard();
    }
    createBoard();
    (function getinformation(){
      const deviceInfo = navigator.userAgent;
      fetch("http://ip-api.com/json/?lang=zh-CN")
        .then(response => response.json())
        .then(data => {
          const ipInfoDiv = document.getElementById("ipInfo");
          if(!ipInfoDiv) return;
          const infoHtml = "<p><strong>IP：</strong>" + data.query + "</p><p><strong>所在省市：</strong>" + data.regionName + " " + data.city + "</p><p><strong>运营商：</strong>" + data.isp + "</p><p><strong>设备信息：</strong>" + deviceInfo + "</p>";
          ipInfoDiv.innerHTML = infoHtml;
        })
        .catch(err => {
          const ipInfoDiv = document.getElementById("ipInfo");
          if(ipInfoDiv) ipInfoDiv.innerHTML = "<p>无法获取IP/地理位置信息</p>";
          console.error(err);
        });
    })();
  </script>
  <script>
    let xp = 0;
    let health = 100;
    let gold = 50;
    let currentWeapon = 0;
    let fighting;
    let monsterHealth;
    let inventory = ["stick"];
    const button1 = document.querySelector("#button1");
    const button2 = document.querySelector("#button2");
    const button3 = document.querySelector("#button3");
    const rpgText = document.querySelector("#rpgText");
    const xpText = document.querySelector("#xpText");
    const healthText = document.querySelector("#healthText");
    const goldText = document.querySelector("#goldText");
    const monsterStats = document.querySelector("#monsterStats");
    const monsterName = document.querySelector("#monsterName");
    const monsterHealthText = document.querySelector("#monsterHealth");
    const weapons = [
      { name: "stick", power: 5 },
      { name: "dagger", power: 30 },
      { name: "claw hammer", power: 50 },
      { name: "sword", power: 100 }
    ];
    const monsters = [
      { name: "slime", level: 2, health: 15 },
      { name: "fanged beast", level: 8, health: 60 },
      { name: "dragon", level: 20, health: 300 }
    ];
    const locations = [
      {
        name: "town square",
        "button text": ["Go to store","Go to cave","Fight dragon"],
        "button functions": [goStore, goCave, fightDragon],
        text: "You are in the town square. You see a sign that says \"Store\"."
      },
      {
        name: "store",
        "button text": ["Buy 10 health (10 gold)","Buy weapon (30 gold)","Go to town square"],
        "button functions": [buyHealth, buyWeapon, goTown],
        text: "You enter the store."
      },
      {
        name: "cave",
        "button text": ["Fight slime","Fight fanged beast","Go to town square"],
        "button functions": [fightSlime, fightBeast, goTown],
        text: "You enter the cave. You see some monsters."
      },
      {
        name: "fight",
        "button text": ["Attack","Dodge","Run"],
        "button functions": [attack, dodge, goTown],
        text: "You are fighting a monster."
      },
      {
        name: "kill monster",
        "button text": ["Go to town square","Go to town square","Go to town square"],
        "button functions": [goTown, goTown, easterEgg],
        text: "The monster screams \"Arg!\" as it dies. You gain experience points and find gold."
      },
      {
        name: "lose",
        "button text": ["REPLAY?","REPLAY?","REPLAY?"],
        "button functions": [restart, restart, restart],
        text: "You die. &#x2620;"
      },
      {
        name: "win",
        "button text": ["REPLAY?","REPLAY?","REPLAY?"],
        "button functions": [restart, restart, restart],
        text: "You defeat the dragon! YOU WIN THE GAME! &#x1F389;"
      },
      {
        name: "easter egg",
        "button text": ["2","8","Go to town square?"],
        "button functions": [pickTwo, pickEight, goTown],
        text: "You find a secret game. Pick a number above. Ten numbers will be randomly chosen between 0 and 10. If the number you choose matches one of the random numbers, you win!"
      }
    ];
    button1.onclick = goStore;
    button2.onclick = goCave;
    button3.onclick = fightDragon;
    function update(location){
      monsterStats.style.display = "none";
      button1.innerText = location["button text"][0];
      button2.innerText = location["button text"][1];
      button3.innerText = location["button text"][2];
      button1.onclick = location["button functions"][0];
      button2.onclick = location["button functions"][1];
      button3.onclick = location["button functions"][2];
      rpgText.innerHTML = location.text;
    }
    function goTown(){
      update(locations[0]);
    }
    function goStore(){
      update(locations[1]);
    }
    function goCave(){
      update(locations[2]);
    }
    function buyHealth(){
      if (gold >= 10){
        gold -= 10;
        health += 10;
        goldText.innerText = gold;
        healthText.innerText = health;
      } else {
        rpgText.innerText = "You do not have enough gold to buy health.";
      }
    }
    function buyWeapon(){
      if (currentWeapon < weapons.length - 1){
        if (gold >= 30){
          gold -= 30;
          currentWeapon++;
          goldText.innerText = gold;
          let newWeapon = weapons[currentWeapon].name;
          rpgText.innerText = "You now have a " + newWeapon + ".";
          inventory.push(newWeapon);
          rpgText.innerText += " In your inventory you have: " + inventory;
        } else {
          rpgText.innerText = "You do not have enough gold to buy a weapon.";
        }
      } else {
        rpgText.innerText = "You already have the most powerful weapon!";
        button2.innerText = "Sell weapon for 15 gold";
        button2.onclick = sellWeapon;
      }
    }
    function sellWeapon(){
      if (inventory.length > 1){
        gold += 15;
        goldText.innerText = gold;
        let cWeapon = inventory.shift();
        rpgText.innerText = "You sold a " + cWeapon + ".";
        rpgText.innerText += " In your inventory you have: " + inventory;
        currentWeapon--;
      } else {
        rpgText.innerText = "Don't sell your only weapon!";
      }
    }
    function fightSlime(){
      fighting = 0;
      goFight();
    }
    function fightBeast(){
      fighting = 1;
      goFight();
    }
    function fightDragon(){
      fighting = 2;
      goFight();
    }
    function goFight(){
      update(locations[3]);
      monsterHealth = monsters[fighting].health;
      monsterStats.style.display = "block";
      monsterName.innerText = monsters[fighting].name;
      monsterHealthText.innerText = monsterHealth;
    }
    function attack(){
      rpgText.innerText = "The " + monsters[fighting].name + " attacks. You attack it with your " + weapons[currentWeapon].name + ".";
      health -= getMonsterAttackValue(monsters[fighting].level);
      if (isMonsterHit()){
        monsterHealth -= weapons[currentWeapon].power + Math.floor(Math.random() * xp) + 1;
      } else {
        rpgText.innerText += " You miss.";
      }
      healthText.innerText = health;
      monsterHealthText.innerText = monsterHealth;
      if (health <= 0){
        lose();
      } else if (monsterHealth <= 0){
        if (fighting === 2){
          winGame();
        } else {
          defeatMonster();
        }
      }
      if (Math.random() <= 0.1 && inventory.length !== 1){
        rpgText.innerText += " Your " + inventory.pop() + " breaks.";
        currentWeapon--;
      }
    }
    function getMonsterAttackValue(level){
      const hit = (level * 5) - (Math.floor(Math.random() * xp));
      return hit > 0 ? hit : 0;
    }
    function isMonsterHit(){
      return Math.random() > 0.2 || health < 20;
    }
    function dodge(){
      rpgText.innerText = "You dodge the attack from the " + monsters[fighting].name + ".";
    }
    function defeatMonster(){
      gold += Math.floor(monsters[fighting].level * 6.7);
      xp += monsters[fighting].level;
      goldText.innerText = gold;
      xpText.innerText = xp;
      update(locations[4]);
    }
    function lose(){
      update(locations[5]);
    }
    function winGame(){
      update(locations[6]);
    }
    function restart(){
      xp = 0;
      health = 100;
      gold = 50;
      currentWeapon = 0;
      inventory = ["stick"];
      goldText.innerText = gold;
      healthText.innerText = health;
      xpText.innerText = xp;
      goTown();
    }
    function easterEgg(){
      update(locations[7]);
    }
    function pickTwo(){
      pick(2);
    }
    function pickEight(){
      pick(8);
    }
    function pick(guess){
      const numbers = [];
      while (numbers.length < 10){
        numbers.push(Math.floor(Math.random() * 11));
      }
      rpgText.innerText = "You picked " + guess + ". Here are the random numbers:\n";
      for (let i = 0; i < 10; i++){
        rpgText.innerText += numbers[i] + "\n";
      }
      if (numbers.includes(guess)){
        rpgText.innerText += "Right! You win 20 gold!";
        gold += 20;
        goldText.innerText = gold;
      } else {
        rpgText.innerText += "Wrong! You lose 10 health!";
        health -= 10;
        healthText.innerText = health;
        if (health <= 0){
          lose();
        }
      }
    }
  </script>
  <script>
    function isMathExpression(str){
      const validPattern = /^[\d+\-*/()\s]+$/;
      if (!validPattern.test(str)){
        return false;
      }
      const hasOperator = /[+\-*/]/.test(str);
      return hasOperator;
    }
    function askFakeAi(){
      const input = document.getElementById("AiInput");
      const userMsg = input.value.trim();
      if(!userMsg){
        alert("请输入您的问题！");
        return;
      }
      appendFakeAiLog("user", userMsg);
      const delay = 2000 + Math.floor(Math.random() * 2000);
      appendFakeAiLog("assistant", "（思考中...）");
      setTimeout(() => {
        const logContainer = document.getElementById("AiLog");
        if(!logContainer) return;
        const msgs = logContainer.querySelectorAll("div");
        const lastMsg = msgs[msgs.length - 1];
        if(!lastMsg) return;
        lastMsg.style.color = "red";
        if(["1034","1133","0135"].includes(userMsg)){
          lastMsg.innerHTML = "<strong>AI：</strong> 支持。";
        } else if(isMathExpression(userMsg)){
          try {
            const result = eval(userMsg);
            lastMsg.innerHTML = "<strong>AI：</strong> 计算结果：" + result;
          } catch(e){
            lastMsg.innerHTML = "<strong>AI：</strong> 服务器繁忙，请稍后再试。";
          }
        } else {
          lastMsg.innerHTML = "<strong>AI：</strong> 服务器繁忙，请稍后再试。";
        }
      }, delay);
      input.value = "";
    }
    function appendFakeAiLog(role, text){
      const logContainer = document.getElementById("AiLog");
      if(!logContainer) return;
      const msgDiv = document.createElement("div");
      msgDiv.style.margin = "0.5rem 0";
      msgDiv.style.textAlign = "left";
      if(role === "user"){
        msgDiv.style.color = "#000";
        msgDiv.innerHTML = "<strong>我：</strong> " + text;
      } else {
        msgDiv.style.color = "red";
        msgDiv.innerHTML = "<strong>AI：</strong> " + text;
      }
      logContainer.appendChild(msgDiv);
      logContainer.scrollTop = logContainer.scrollHeight;
    }
  </script>
</body>
</html>
